FROM node:lts

ARG GERMINI_API_KEY
ARG WEATHER_API_URL
ARG MONGODB

ENV GERMINI_API_KEY=${GERMINI_API_KEY}
ENV WEATHER_API_URL=${WEATHER_API_URL}
ENV MONGODB=${MONGODB}

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install

COPY . .

RUN npm run build

EXPOSE 3000

CMD ["npm", "run", "start:prod"]